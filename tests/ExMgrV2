import { gsap } from 'gsap';

import Experience from './Experience.js'


import planeVertexShader1 from './shaders/plane/1/vertex.glsl'
import planeFragmentShader1 from './shaders/plane/1/fragment.glsl'
import planeVertexShader2 from './shaders/plane/2/vertex.glsl'
import planeFragmentShader2 from './shaders/plane/2/fragment.glsl'
import galaxyVertexShader from './shaders/anomaly/galaxy/vertex.glsl'
import galaxyFragmentShader from './shaders/anomaly/galaxy/fragment.glsl'
import wormholeVertexShader from './shaders/anomaly/wormhole/vertex.glsl'
import wormholeFragmentShader from './shaders/anomaly/wormhole/fragment.glsl'



export default class ExperienceManager{

    constructor(anomaly){
        this.experience = new Experience();
        this.worldInterface = this.experience.world.worldInterface;
        this.anomaly = this.experience.world.anomaly;
        this.plane = this.experience.world.plane;
        this.animation = this.experience.animation
        this.animationConfig = this.experience.animationConfig
        
        this.chapters = [
            {
                anomalyParams: { 
                    count: 619000,
                    size: 53,
                    radius: 14,
                    branches: 8,
                    spin: 2,
                    randomness: 2,
                    randomnessPower:3,
                    insideColor: '#ffc994',
                    outsideColor: '#373c81',
                    offsetX: 16,
                    offsetY: 50,
                    offsetZ: 0,
                    vertexShader: galaxyVertexShader,
                    fragmentShader: galaxyFragmentShader
                },

                // planeShaders: {
                //    vertexShader: planeVertexShader1,
                //    fragmentShader: planeFragmentShader1,
                // },
                
            },

            {
                anomalyParams: { 
                    count: 410000,
                    size: 13,
                    radius: 30,
                    branches: 13,
                    spin: 1,
                    randomness: 0.476,
                    randomnessPower: 4.579,
                    insideColor: '#e5ad76',
                    outsideColor: '#9ba2d9',
                    offsetX: 4,
                    offsetY: 30,
                    offsetZ: 40,
                    vertexShader: wormholeVertexShader,
                    fragmentShader: wormholeFragmentShader
                    
                },
                // planeShaders: {
                //     vertexShader: planeVertexShader2, 
                //     fragmentShader: planeFragmentShader2, 
                // },
                
            },

            {
                anomalyParams: { 
                    count: 225700,
                    size: 55.748,
                    radius: 6.578,
                    branches: 7,
                    spin: 1,
                    randomness: 0.033,
                    randomnessPower: 10,
                    insideColor: '#e5ad76',
                    outsideColor: '#9ba2d9',
                    offsetX: 1.322,
                    offsetY: 8.759,
                    offsetZ: 40,
                },
                // planeShaders: {
                //     vertexShader: planeVertexShader2, 
                //     fragmentShader: planeFragmentShader2, 
                // },
                
            },
        ];

        this.setChapterCamera()

    }

    setChapterCamera(){
        let page = sessionStorage.getItem('page');
        
        let chapter1Tl = gsap.timeline({paused: true})
        
        .to(this.experience.camera.instance.position, {
            x: 0, 
            y: 20, 
            z: 100,
            duration: 2,
            ease: 'power2.inOut',
        })

        let chapter2Tl = gsap.timeline({paused: true})
        .to(this.experience.camera.instance.position, {
            x: 10,
            duration: 2,
            ease: 'power2.inOut',
        })

        switch (page)
        {
            case 'chapter1':
                console.log('chapter1 timeline')
                chapter1Tl.play()
            break

            case 'chapter2':
                console.log('chapter2 timeline')
                chapter2Tl.play()
            break

            case 'chapter3':
                console.log('chapter3 timeline')
                
            break

            case 'chapter4':
                console.log('chapter4 timeline')
                
            break

            case 'chapter5':
                console.log('chapter5 timeline')
                
            break
            
        }

    }

    updateScene(){
        this.setChapterCamera()
    }


}